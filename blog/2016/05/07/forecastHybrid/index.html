      <!DOCTYPE html>
	<html lang="en">
		<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
			<title>Announcing new forecastHybrid package</title>
      	
         
         
            <meta name ="description" content ="The new forecastHybrid package for R by David Shaub and myself provides convenient access to ensemble time series forecasting methods, in any combination of up to five of the modelling approaches from Hyndman's forecast package.  These are auto-selected autoregressive integrated moving average; exponential smoothing state space (both ets and tbats); feed forward neural network with a single hidden layer and lagged inputs; and forecasts of loess-based seasonal decomposition.">
            <meta property="og:description" content ="The new forecastHybrid package for R by David Shaub and myself provides convenient access to ensemble time series forecasting methods, in any combination of up to five of the modelling approaches from Hyndman's forecast package.  These are auto-selected autoregressive integrated moving average; exponential smoothing state space (both ets and tbats); feed forward neural network with a single hidden layer and lagged inputs; and forecasts of loess-based seasonal decomposition.">
         
         <meta property="og:site_name" content="Peter's stats stuff" />
         <meta property="og:title" content="Announcing new forecastHybrid package" />
         
            <meta property="og:image" content="http://ellisp.github.io/img/0039-unemployment.png" />
         
         <meta property="og:url" content="http://ellisp.github.io/blog/2016/05/07/forecastHybrid/" />
         <meta property="og:author" content= "https://www.facebook.com/peter.ellis.353" />
         <meta property="og:type" content="article" />
           
          <link href="/css/bootstrap.min.css" rel ="stylesheet">
          <link href="/css/bootstrap-theme.min.css" rel ="stylesheet">
            <link href="/css/custom.css" rel ="stylesheet">       
     <link rel="stylesheet" href="/css/Pygments/autumn.css">      
     <link rel="stylesheet" href="/css/Pygments/custom.css">      
            
            
   <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

     ga('create', 'UA-65886313-1', 'auto');
     ga('send', 'pageview');

   </script>

   <style>
    ul li { margin-bottom: 9px; }
    ol li { margin-bottom: 9px; }
   </style>
   
   <link rel="alternate" type="application/rss+xml" title="Peter's stats stuff by Peter Ellis"
      href="/feed.xml">


      
		</head>
      
  <body role = "document">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
         <script src="/js/bootstrap.min.js"></script>
         
  
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Peter's stats stuff</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">All blog posts <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="/blog">Ordered by date</a></li>
                  <li><a href="/blog/index_by_tag.html">Grouped by subject matter</a></li>
                  <li><a href = /blog/2016/06/05/bootstrap-cv-strategies>Most recent post</a></li>
                 </ul>
            </li>
              <li><a href="/blog/showcase.html">Showcase</a></li>
              <li><a href="/presentations/index.html">Presentations</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  
  
      
			<div class="container">
			
			    <div class="jumbotron">
      <div class="container">
        <h1>Announcing new forecastHybrid package</h1>
         <p class="meta">07 May 2016</p>
        
      </div>
    </div>




<div class = "post-summary">
<h2>TL;DR Summary:</h2>
   The new forecastHybrid package for R by David Shaub and myself provides convenient access to ensemble time series forecasting methods, in any combination of up to five of the modelling approaches from Hyndman's forecast package.  These are auto-selected autoregressive integrated moving average; exponential smoothing state space (both ets and tbats); feed forward neural network with a single hidden layer and lagged inputs; and forecasts of loess-based seasonal decomposition.
   <hr></hr>
</div>

<div class="post">
<div class="col-md-2">

</div>
  <div class="col-md-8">

  <h2 id="background-and-motivation">Background and motivation</h2>
<p>In an <a href="/blog/2016/01/30/hybrid-forecasts/">earlier post</a> I explored ways that might improve on standard methods for prediction intervals from univariate time series forecasting.  One of the tools I used was a convenience function to combine forecasts from Rob Hyndman’s <code>ets</code> and <code>auto.arima</code> functions.  David Shaub (with a small contribution from myself) has now built and published an R package <code>forecastHybrid</code> that expands on this idea to create ensembles from other forecasting methods from Hyndman’s <code>forecast</code> package.</p>

<p>The motivation is to make it easy to improve forecasts, both their point estimates and their prediction intervals.  It has been well known for many years that taking the average of rival forecast methods improves the performance of forecasts.  This new R package aims to make it as easy for people to do this as to fit the individual models in the first place.</p>

<h2 id="installation">Installation</h2>
<p>The stable version of the <code>forecastHybrid</code> package is on CRAN, and is installed the usual way:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>install.packages<span class="p">(</span><span class="s">&quot;forecastHybrid&quot;</span><span class="p">)</span>
<a name="True-2"></a><span class="kn">library</span><span class="p">(</span>forecastHybrid<span class="p">)</span></code></pre></div>

<p>It requires at least version 7.1 of Rob Hyndman’s <code>forecast</code> package, which is a recent upgrade.</p>

<h2 id="usage">Usage</h2>

<h3 id="basic">Basic</h3>
<p>Usage is a two step process:</p>

<ul>
  <li>fitting the required time series models</li>
  <li>forecasting them and taking a weighted average</li>
</ul>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>mod1 <span class="o">&lt;-</span> hybridModel<span class="p">(</span>AirPassengers<span class="p">)</span>
<a name="True-2"></a>fc1 <span class="o">&lt;-</span> forecast<span class="p">(</span>mod1<span class="p">)</span>
<a name="True-3"></a>fc1
<a name="True-4"></a>
<a name="True-5"></a>         Point Forecast    Lo <span class="m">80</span>    Hi <span class="m">80</span>    Lo <span class="m">95</span>    Hi <span class="m">95</span>
<a name="True-6"></a>Jan <span class="m">1961</span>       <span class="m">449.0761</span> <span class="m">420.9284</span> <span class="m">474.4528</span> <span class="m">409.9071</span> <span class="m">486.2105</span>
<a name="True-7"></a>Feb <span class="m">1961</span>       <span class="m">430.5014</span> <span class="m">402.5180</span> <span class="m">463.4376</span> <span class="m">392.8622</span> <span class="m">477.7219</span>
<a name="True-8"></a>Mar <span class="m">1961</span>       <span class="m">476.6044</span> <span class="m">427.8241</span> <span class="m">541.2952</span> <span class="m">416.7423</span> <span class="m">560.7848</span>
<a name="True-9"></a>Apr <span class="m">1961</span>       <span class="m">489.6462</span> <span class="m">445.6985</span> <span class="m">533.1953</span> <span class="m">425.6737</span> <span class="m">554.8180</span>
<a name="True-10"></a>May <span class="m">1961</span>       <span class="m">499.3256</span> <span class="m">443.0128</span> <span class="m">546.2434</span> <span class="m">420.7317</span> <span class="m">570.5889</span>
<a name="True-11"></a>Jun <span class="m">1961</span>       <span class="m">565.3663</span> <span class="m">498.8558</span> <span class="m">624.6220</span> <span class="m">471.1949</span> <span class="m">654.7751</span>
<a name="True-12"></a>Jul <span class="m">1961</span>       <span class="m">642.3351</span> <span class="m">550.5136</span> <span class="m">710.4620</span> <span class="m">517.2336</span> <span class="m">747.2133</span>
<a name="True-13"></a><span class="o">&lt;</span>truncated<span class="o">&gt;</span></code></pre></div>

<p>Prediction intervals are based on the conservative (and accurate, at least for the auto.arima / ets combination and the M3 competition data) method I set out in my <a href="/blog/2016/01/30/hybrid-forecasts/">earlier post</a> on hybrid methods.  That is, at each time period of the forecast, the points of the prediction intervals of all the component models in the ensemble that are highest in absolute magnitude are used for the boundaries of the ensemble prediction interval.  This method seems to give truer prediction intervals than any individual model’s prediction intervals, which are usually too narrow (ie give a false sense of precision) because they don’t take model uncertainty into account.  This is an active area of investigation; <a href="https://github.com/ellisp/forecastHybrid/issues/19">we’re not sure we’re going to keep them calculated this way</a>.</p>

<p>The object created by the above procedure is of class <code>forecast</code> and the base graphics plotting method from Hyndman’s <code>forecast</code> package applies:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>par<span class="p">(</span>mar <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
<a name="True-2"></a>plot<span class="p">(</span>fc1<span class="p">,</span> ylab <span class="o">=</span> <span class="s">&quot;International airline passengers&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="/img/0039-airpassengers1.svg" alt="basic" /></p>

<h3 id="custom-combinations-and-weights">Custom combinations and weights</h3>
<p>Controlling which of the five types of available models are used in the ensemble is done via the <code>models</code> argument of <code>hybridModel</code>.  <code>models</code> is a character string of any combination of <code>a</code>, <code>e</code>, <code>n</code>, <code>s</code>, and <code>t</code> for <code>auto.arima</code>, <code>ets</code>, <code>nnetar</code>, <code>stlm</code> and <code>tbats</code> respectively.  In the code below I combine just <code>auto.arima</code> and <code>ets</code> (exponential state space smoothing) models, two component models that make up a high-performing (on average) forecasting method.</p>

<p>I also use this example to show how, instead of weighting the models equally, we can specify greater weight to be given to the model that fits the historical data better.  This procedure isn’t recommended - it seems better just to give the models a priori weights, usually equal, rather than let the data dictate them.  Why this is the case is out of my scope just here.  Here’s the example:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>mod2 <span class="o">&lt;-</span> hybridModel<span class="p">(</span>AirPassengers<span class="p">,</span> models <span class="o">=</span> <span class="s">&quot;ae&quot;</span><span class="p">,</span>
<a name="True-2"></a>                    weights <span class="o">=</span> <span class="s">&quot;insample.errors&quot;</span><span class="p">)</span>
<a name="True-3"></a>fc2 <span class="o">&lt;-</span> forecast<span class="p">(</span>mod2<span class="p">)</span>
<a name="True-4"></a>par<span class="p">(</span>mar <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
<a name="True-5"></a>plot<span class="p">(</span>fc2<span class="p">,</span> ylab <span class="o">=</span> <span class="s">&quot;International airline passengers&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="/img/0039-airpassengers2.svg" alt="ae" /></p>

<h3 id="external-regressors">External regressors</h3>
<p>While most of the candidate models for an ensemble are univariate methods, <code>auto.arima</code> and <code>nnetar</code> models can incorporate an <code>xreg</code> argument.  If you have actual values for the forecast period of external regressors, it’s often useful to use them in the forecasting process.  The forecastHybrid approach lets you do this with the component models that support <code>xreg</code>, while ignoring it and fitting univariate time series models with other component models (eg <code>ets</code>).</p>

<p>To pass <code>xreg</code> or other parameters through to the model-fitting functions, the user passes up to five lists of parameters (<code>a.arg</code>, <code>e.arg</code>, <code>n.arg</code>, <code>s.arg</code> and <code>t.arg</code>).  Here’s an example showing how to pass through xreg parameters to <code>auto.arima</code> for automated ARIMA modelling and <code>nnetar</code> for the feed-forward neural network model.  This example tries to forecast 12 months of unemployment in Wisconsin, given known values of unemployment in surrounding states and for the USA as a whole (this isn’t a particularly realistic example in itself, but is of a type of forecast that does occur in reality, for example when one economic time series is only available after a much longer delay than other more timely measures).</p>

<p>The data management and forecast question below has been pinched from <a href="http://biba.etsii.upm.es/web/tiki-view_blog_post.php?postId=26">an example on the BIBA blog by joaquin</a></p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a><span class="c1"># adapted from http://biba.etsii.upm.es/web/tiki-view_blog_post.php?postId=26 </span>
<a name="True-2"></a><span class="c1"># donwload individual datasets from QUANDL</span>
<a name="True-3"></a>wi<span class="o">&lt;-</span>read.csv<span class="p">(</span><span class="s">&#39;http://www.quandl.com/api/v1/datasets/FRED/WIUR.csv?&amp;auth_token=gigXwpxd6Ex91cjgz1B7&amp;trim_start=1976-01-01&amp;trim_end=2013-04-01&amp;sort_order=desc&#39;</span><span class="p">,</span> colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;Date&#39;</span><span class="o">=</span><span class="s">&#39;Date&#39;</span><span class="p">))</span>
<a name="True-4"></a>us<span class="o">&lt;-</span>read.csv<span class="p">(</span><span class="s">&#39;http://www.quandl.com/api/v1/datasets/FRED/UNRATE.csv?&amp;auth_token=gigXwpxd6Ex91cjgz1B7&amp;trim_start=1976-01-01&amp;trim_end=2013-04-01&amp;sort_order=desc&#39;</span><span class="p">,</span> colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;Date&#39;</span><span class="o">=</span><span class="s">&#39;Date&#39;</span><span class="p">))</span>
<a name="True-5"></a>il<span class="o">&lt;-</span>read.csv<span class="p">(</span><span class="s">&#39;http://www.quandl.com/api/v1/datasets/FRED/ILUR.csv?&amp;auth_token=gigXwpxd6Ex91cjgz1B7&amp;trim_start=1976-01-01&amp;trim_end=2013-04-01&amp;sort_order=desc&#39;</span><span class="p">,</span> colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;Date&#39;</span><span class="o">=</span><span class="s">&#39;Date&#39;</span><span class="p">))</span>
<a name="True-6"></a>mi<span class="o">&lt;-</span>read.csv<span class="p">(</span><span class="s">&#39;http://www.quandl.com/api/v1/datasets/FRED/MIUR.csv?&amp;auth_token=gigXwpxd6Ex91cjgz1B7&amp;trim_start=1976-01-01&amp;trim_end=2013-04-01&amp;sort_order=desc&#39;</span><span class="p">,</span> colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;Date&#39;</span><span class="o">=</span><span class="s">&#39;Date&#39;</span><span class="p">))</span>
<a name="True-7"></a>mn<span class="o">&lt;-</span>read.csv<span class="p">(</span><span class="s">&#39;http://www.quandl.com/api/v1/datasets/FRED/MNUR.csv?&amp;auth_token=gigXwpxd6Ex91cjgz1B7&amp;trim_start=1976-01-01&amp;trim_end=2013-04-01&amp;sort_order=desc&#39;</span><span class="p">,</span> colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;Date&#39;</span><span class="o">=</span><span class="s">&#39;Date&#39;</span><span class="p">))</span>
<a name="True-8"></a>io<span class="o">&lt;-</span>read.csv<span class="p">(</span><span class="s">&#39;http://www.quandl.com/api/v1/datasets/FRED/IAUR.csv?&amp;auth_token=gigXwpxd6Ex91cjgz1B7&amp;trim_start=1976-01-01&amp;trim_end=2013-04-01&amp;sort_order=desc&#39;</span><span class="p">,</span> colClasses<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;Date&#39;</span><span class="o">=</span><span class="s">&#39;Date&#39;</span><span class="p">))</span>
<a name="True-9"></a>
<a name="True-10"></a><span class="c1">#merging the data into one dataframe</span>
<a name="True-11"></a>unemp <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>wi<span class="p">,</span> io<span class="p">,</span> by <span class="o">=</span> <span class="s">&#39;DATE&#39;</span><span class="p">);</span> <span class="kp">colnames</span><span class="p">(</span>unemp<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;DATE&#39;</span><span class="p">,</span> <span class="s">&#39;wi&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">)</span>
<a name="True-12"></a>unemp <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>unemp<span class="p">,</span> mi<span class="p">,</span> by <span class="o">=</span> <span class="s">&#39;DATE&#39;</span><span class="p">);</span> <span class="kp">colnames</span><span class="p">(</span>unemp<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;DATE&#39;</span><span class="p">,</span> <span class="s">&#39;wi&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">,</span> <span class="s">&#39;mi&#39;</span><span class="p">)</span>
<a name="True-13"></a>unemp <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>unemp<span class="p">,</span> mn<span class="p">,</span> by <span class="o">=</span> <span class="s">&#39;DATE&#39;</span><span class="p">);</span> <span class="kp">colnames</span><span class="p">(</span>unemp<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;DATE&#39;</span><span class="p">,</span> <span class="s">&#39;wi&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">,</span> <span class="s">&#39;mi&#39;</span><span class="p">,</span> <span class="s">&#39;mn&#39;</span><span class="p">)</span>
<a name="True-14"></a>unemp <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>unemp<span class="p">,</span> us<span class="p">,</span> by <span class="o">=</span> <span class="s">&#39;DATE&#39;</span><span class="p">);</span> <span class="kp">colnames</span><span class="p">(</span>unemp<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;DATE&#39;</span><span class="p">,</span> <span class="s">&#39;wi&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">,</span> <span class="s">&#39;mi&#39;</span><span class="p">,</span> <span class="s">&#39;mn&#39;</span><span class="p">,</span> <span class="s">&#39;us&#39;</span><span class="p">)</span>
<a name="True-15"></a>unemp <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>unemp<span class="p">,</span> il<span class="p">,</span> by <span class="o">=</span> <span class="s">&#39;DATE&#39;</span><span class="p">);</span> <span class="kp">colnames</span><span class="p">(</span>unemp<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;DATE&#39;</span><span class="p">,</span> <span class="s">&#39;wi&#39;</span><span class="p">,</span> <span class="s">&#39;io&#39;</span><span class="p">,</span> <span class="s">&#39;mi&#39;</span><span class="p">,</span> <span class="s">&#39;mn&#39;</span><span class="p">,</span> <span class="s">&#39;us&#39;</span><span class="p">,</span> <span class="s">&#39;il&#39;</span><span class="p">)</span>
<a name="True-16"></a>
<a name="True-17"></a><span class="c1"># break into historical and forecast periods</span>
<a name="True-18"></a>n <span class="o">&lt;-</span> <span class="kp">nrow</span><span class="p">(</span>unemp<span class="p">)</span>
<a name="True-19"></a>unemp_hist <span class="o">&lt;-</span> unemp<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="p">(</span>n <span class="o">-</span> <span class="m">12</span><span class="p">),</span> <span class="p">]</span>
<a name="True-20"></a>unemp_fc <span class="o">&lt;-</span> unemp<span class="p">[(</span>n <span class="o">-</span> <span class="m">11</span><span class="p">)</span><span class="o">:</span><span class="m">448</span><span class="p">,]</span>
<a name="True-21"></a>unemp_hist_ts <span class="o">&lt;-</span> ts<span class="p">(</span>unemp_hist<span class="o">$</span>wi<span class="p">,</span> start <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1976</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> frequency <span class="o">=</span> <span class="m">12</span><span class="p">)</span>
<a name="True-22"></a>
<a name="True-23"></a><span class="c1"># fit hybrid model, passing arguments to auto.arima with a.args and to</span>
<a name="True-24"></a><span class="c1"># nnetar with n.args</span>
<a name="True-25"></a>mod4 <span class="o">&lt;-</span> hybridModel<span class="p">(</span>unemp_hist_ts<span class="p">,</span> models <span class="o">=</span> <span class="s">&quot;aen&quot;</span><span class="p">,</span> 
<a name="True-26"></a>                    a.args <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>xreg <span class="o">=</span> unemp_hist<span class="p">[</span> <span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">7</span><span class="p">]),</span>
<a name="True-27"></a>                    n.args <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>xreg <span class="o">=</span> unemp_hist<span class="p">[</span> <span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">7</span><span class="p">]))</span>
<a name="True-28"></a>
<a name="True-29"></a><span class="c1"># fit the forecast - note that you have to supply the future xreg values,</span>
<a name="True-30"></a><span class="c1"># but you only need to do it once (both nnetar and auto.arima use the same </span>
<a name="True-31"></a><span class="c1"># ones):                    </span>
<a name="True-32"></a>par<span class="p">(</span>mar <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
<a name="True-33"></a>plot<span class="p">(</span>fc4<span class="p">,</span> ylab <span class="o">=</span> <span class="s">&quot;Unemployment in Wisonsin&quot;</span><span class="p">,</span> 
<a name="True-34"></a>     sub <span class="o">=</span> <span class="s">&quot;Forecasts based on unemployment in\nUSA, Iowa, Michigan, Minnesota, and Illinois&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="/img/0039-unemployment.svg" alt="unemp" /></p>

<p>There’s a lot more functionality in this package, mostly just inherited from Hyndman’s <code>forecast</code> package.  So <a href="https://cran.rstudio.com/web/packages/forecastHybrid/">check it out on CRAN</a>.</p>

<h2 id="future-work">Future work</h2>
<p>Future work on the package, if / when we get around to it, is likely to include:</p>

<ul>
  <li>Allowing the weights between the models to be set based on cross-validation performance of the component models</li>
  <li>Allowing weights between the models to change over different forecast horizons (eg some models are known to be generally better at predicting long term than short term, so could be given extra weight as the forecast horizon increase)</li>
  <li><code>ggplot2</code> graphics integration</li>
  <li>More models</li>
  <li>Improved parallelization (it already works with parallel processing, but this could be improved between models)</li>
  <li>Automating model selection</li>
  <li>Various under the hood things</li>
</ul>

<p>I also hope to do some more work <em>with</em> the package, eg more systematic tests of the performance of these hybrid model forecasts both as point forecasters and prediction intervals.</p>

<p>Bugs, issues and enhancement requests can be <a href="https://github.com/ellisp/forecastHybrid/issues">filed at GitHub</a>.</p>

<p>Nearly all the credit for this package goes to David Shaub; although it’s hosted on my GitHub account, my contribution has been small.  So thanks David for a great convenient set of functionality for forecasters using R.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a><span class="o">@</span>Manual<span class="p">{,</span>
<a name="True-2"></a>    title <span class="o">=</span> <span class="p">{</span>forecastHybrid<span class="o">:</span> Convenient Functions <span class="kr">for</span> Ensemble Time Series Forecasts<span class="p">},</span>
<a name="True-3"></a>    author <span class="o">=</span> <span class="p">{</span>David Shaub<span class="p">},</span>
<a name="True-4"></a>    year <span class="o">=</span> <span class="p">{</span><span class="m">2016</span><span class="p">},</span>
<a name="True-5"></a>    note <span class="o">=</span> <span class="p">{</span>R package version <span class="m">0.1.5</span><span class="p">},</span>
<a name="True-6"></a>    url <span class="o">=</span> <span class="p">{</span>https<span class="o">://</span>CRAN.R<span class="o">-</span>project.org<span class="o">/</span>package<span class="o">=</span>forecastHybrid<span class="p">},</span>
<a name="True-7"></a>  <span class="p">}</span></code></pre></div>



</div>

<div class = "container">
   <div class="col-md-4">
    
        <a rel="prev" href="/blog/2016/04/16/nzelect4">
        <p>&larr; Older</p>
        <p>Election analysis contest entry part 4 - drivers of preference for Green over Labour party</p>
        
        </a>
    
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4" style="text-align: right;">
     
        <a rel="next" href="/blog/2016/05/14/scots-female-ratio">
        <p>Newer &rarr;</p>
        <p>Minimalist Tufte-inspired axis text with Scottish-New Zealand historical material</p>
        
        </a>
    
      </div>
      </div>
      
      
      
</div>


   
    <div id="disqus_thread"></div>

    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'statsinthewild';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'statsinthewild';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
    
   
			
			</div><!-- /.container -->

         

   <div class = "container footer">
			<footer>
	    		
            <p>Follow <a href = "/feed.xml">this blog with RSS</a>.  Or follow <a href = "/feed.r.xml">posts in this blog featuring R with RSS</a>.</p>
	
            <p>This blog is built with <a href = "http://jekyllrb.com/">Jekyll</a>, <a href = "http://getbootstrap.com/">Bootstrap</a>, <a href = "https://www.ruby-lang.org/en/">Ruby</a> and <a href = "https://cran.r-project.org/">R</a>.  Read my <a href="/about/acknowledgements.html">acknowledgements</a> for a little more on how.  I'm pleased to be aggregated at <a href="http://www.r-bloggers.com/">R-bloggers</a>, the one-stop shop for blog posts featuring R.</p>

            <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Peter's stats stuff</span> by <a href = "/about/index.html">Peter Ellis</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.


			</footer>
    </div>



  
</body>
</html>
   




         
