      <!DOCTYPE html>
	<html lang="en">
		<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
			<title>More things with the New Zealand Election Study</title>
      	
         
         
            <meta name ="description" content ="I introduce a new web app that allows nons-specialists to explore voting behaviour in the New Zealand Election Study, and reflect on what I've done so far with that data.">
            <meta property="og:description" content ="I introduce a new web app that allows nons-specialists to explore voting behaviour in the New Zealand Election Study, and reflect on what I've done so far with that data.">
         
         <meta property="og:site_name" content="Peter's stats stuff" />
         <meta property="og:title" content="More things with the New Zealand Election Study" />
         
            <meta property="og:image" content="http://ellisp.github.io/img/0108-screenshot-crosstabs-nzes.png" />
         
		 
			<meta property="og:url" content="http://ellisp.github.io/blog/2017/08/20/nzes-so-far.html" />
		 
         <meta property="og:author" content= "https://www.facebook.com/peterstats" />
         <meta property="og:type" content="article" />
           
          <link href="/css/bootstrap.min.css" rel ="stylesheet">
          <link href="/css/bootstrap-theme.min.css" rel ="stylesheet">
            <link href="/css/custom.css" rel ="stylesheet">     
		<link href="/css/syntax.css" rel ="stylesheet">     			
                 
            
   <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

     ga('create', 'UA-65886313-1', 'auto');
     ga('send', 'pageview');

   </script>
   
   <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

   <style>
    ul li { margin-bottom: 9px; }
    ol li { margin-bottom: 9px; }
   </style>
   
   <link rel="alternate" type="application/rss+xml" title="Peter's stats stuff by Peter Ellis"
      href="/feed.xml">


      
		</head>
      
  <body role = "document">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.6";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
  
  <script>
  (function() {
    var cx = '015640467633673901770:pk3v2c95baw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

  
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Peter's stats stuff</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">All blog posts <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="/blog">Ordered by date</a></li>
				  <li><a href="/blog/most-popular.html">Ordered by popularity</a></li>
                  <li><a href="/blog/index_by_tag.html">Grouped by subject matter</a></li>
                  <li><a href = /blog/2017/09/09/rmarkdown>Most recent post</a></li>
				  <li><a href="/blog/nz.html">All blog posts with data about New Zealand</a></li>
				  <li><a href="/blog/voting.html">All blog posts on voting behaviour</a></li>
                 </ul>
            </li>
              <li><a href="/blog/showcase.html">Showcase</a></li>
              <li><a href="/presentations/index.html">Presentations</a></li>
			  <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">NZ Election forecasts<span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href = "/elections/combined.html">Combined model (recommended)</a></li>
                  <li><a href="https://ellisp.shinyapps.io/nz-election-2017/">Explore coalitions and assumptions</a></li>
				  <li><a href="/elections/elections.html">Model A ("generalized additive model")</a></li>
				  <li><a href = "/elections/state-space.html">Model B ("state space")</a></li>
				  <li><a href="/elections/changelog.html">Log of changes to forecasts</a></li>
				  <li><a href="https://github.com/ellisp/nz-election-forecast">Source code on GitHub (external site)</a></li>
				  <li><a href="/blog/voting.html">All blog posts on voting behaviour</a></li>
                </ul>				
			  </li>
			  
			  
		    </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  
  
      
			<div class="container">
			
			    <div class="jumbotron">
      <div class="container">
        <h1>More things with the New Zealand Election Study</h1>
         <p class="meta">20 Aug 2017</p>
        
      </div>
    </div>




<div class = "post-summary">
<h2>At a glance:</h2>
   I introduce a new web app that allows nons-specialists to explore voting behaviour in the New Zealand Election Study, and reflect on what I've done so far with that data.
   <hr></hr>
</div>

<div class="post">
<div class="col-md-2">

</div>
  <div class="col-md-8">

  <h2 id="a-new-cross-tab-tool">A new cross tab tool</h2>

<p>I recently put up a simple web app, built with R Shiny, to let users explore the relationship between party vote in the 2014 New Zealand general election and a range of demographic and attitudinal questions in the <a href="http://www.nzes.org/">New Zealand Election Study</a>.  The image below is a link to the web app:</p>

<p><a href="https://ellisp.shinyapps.io/nzes2014_x_by_party/"><img src="/img/0108-screenshot-crosstabs-nzes.png" width="100%" /></a></p>

<p>The original motivation was to answer a <a href="https://twitter.com/FoxyLustyGrover/status/892263331343384576">question on Twitter</a> for a breakdown of National party vote by gender.  I was surprised how interesting I found the resulting tool though.  Without a fancy graphic, just a table of numbers, there’s a lot to play around with here.  I deliberately kept the functionality narrow, because I wanted to avoid a bewildering array of choices and confusing user interface, so it tries to do only one thing and does it well.  The thing it does is show cross tabs of party vote with other variables from the study.</p>

<p>The <a href="https://github.com/ellisp/ellisp.github.io/tree/source/_working/0108">source code of the Shiny app</a> is available as is the <a href="https://github.com/ellisp/ellisp.github.io/blob/source/_working/0108-nzes-prep.R">preparation script</a> but they’re quite unremarkable so I won’t reproduce them here; follow the links and read them on GitHub in their natural habitat.</p>

<p>A few interesting statistical points to note:</p>

<ul>
  <li>I produced a new set of weights so population totals would match the actual party vote.  Even after the NZES team did their weighting, the sample wasn’t representative of the population of people on the electoral roll in terms of actual party vote.  In fact, people who did <em>not</em> vote were particularly over-represented.  This isn’t that surprising - people who don’t vote for whatever reason (whether it is apathy or being out of the country and busy with other things) are probably also disproportionately likely not to respond to surveys.  The web app gives the user the choice of the original NZES weights or my re-calibrated ones, defaulting to the latter.  I think that’s useful because people might use the app to say “X thousand voters for party Y have Z attitude”, so adding up to the right number of voters by party is important.</li>
  <li>I included an option to see the Pearson residuals, which compare the observed cell count with what would have been expected in the (nearly always implausible) null hypothesis of no relationship at all between the two variables making up the cross tab.  I think this is by far the best way to look at which cells of the table are unusual.  For example, in the screenshot above, it is highlighted clearly that National voters had unusually strong levels of agreement with the statement “with lower welfare benefits people would learn to stand on their own two feet”, whereas voters for Labour and the Greens were unusually <em>unlikely</em> to agree with that statement (and likely to disagree).  This won’t be a surprise for any watchers of New Zealand politics.</li>
  <li>One version I tested had a little Chi square test of the null hypothesis of no relationship between the two.  But it was nearly always returning a p value of zero, because of course there is a relationship between these variables.  I decided it was uninteresting, and didn’t want to focus people on null hypothesis testing anyway, so left it out.</li>
  <li>I resisted the urge to put multiple numbers in each cell of the table, as is done in some stats package output (eg SPSS).  I think tables like these work as visualisations if the eye can sweep across, knowing that every number in the table is somehow comparable.  This isn’t possible when you combine values in each cell (eg include both row-wise and column-wise percentages).</li>
  <li>It was interesting to think through what should be the default way of calculating percentages in a table like this.  I decided in the end to default to row-wise, which means the user is reading (for example) “Of the people who voted X, what percentage thought Y?”  I don’t think there’s a right or wrong, just a contingent guess that this is most likely to be the first want of people.</li>
  <li>An early version of the tool had an option for “margin of error” for each cell and this drew my attention to the difficult of conceptualising the margin of error in a single cell of a contingency table.  I’m going to think more about this one.</li>
  <li>Adding the heatmap colour was a late addition, made easy by the wonder of the easy combination of <code class="highlighter-rouge">datatable</code> JavaScript with R via the <code class="highlighter-rouge">DT</code> package.</li>
</ul>

<h2 id="more-stuff-using-the-new-zealand-election-study">More stuff using the New Zealand Election Study</h2>

<p>So I now have two web apps with this data:</p>

<ul>
  <li><a href="https://ellisp.shinyapps.io/individual-vote-nzes/">Predict party vote given a combination of demographic characteristics</a></li>
  <li><a href="https://ellisp.shinyapps.io/nzes2014_x_by_party/">Cross tab of your choice of variable with party vote</a></li>
</ul>

<p>… and six blog posts.  To recap, here’s all the blog posts I’ve done so far with this data:</p>

<h3 id="attitudes-to-the-dirty-politics-bookblog20160918nzes1"><a href="/blog/2016/09/18/nzes1">1. Attitudes to the “Dirty Politics” book</a></h3>

<p>In my first post on the data, I did quick demo analysis of what the attitudes were of voters for various parties to Nicky Hagar’s book “Dirty Politics”</p>

<p><img src="/img/0057-hagar.svg" width="100%" /></p>

<h3 id="modelling-individual-level-party-voteblog20170506nz-first"><a href="/blog/2017/05/06/nz-first">2. Modelling individual level party vote</a></h3>

<p>I did some reasonably comprehensive modelling of who votes for whom.  The main work here was deciding how many degrees of freedom could be spared for the various demographic variables, and clumping/tidying them up into analysis-ready form.  This was also a good opportunity for some thinking about modelling strategy, the role of the bootstrap, and multiple imputation which is essential with this sort of problem.</p>

<p><img src="/img/0096-all-parties.svg" width="100%" /></p>

<h3 id="web-app-for-individual-voteblog20170514nzes-app"><a href="/blog/2017/05/14/nzes-app">3. Web app for individual vote</a></h3>

<p>This led to my first web app with the New Zealand Election Study data, which lets you explore the predicted probability of different types of people voting for different parties.</p>

<p><a href="https://ellisp.shinyapps.io/individual-vote-nzes/"><img src="/img/0097-nzes3.gif" width="100%" /></a></p>

<h3 id="sankey-chart-of-transitions-from-2011-vote-to-2014blog20170521nzes-sankey"><a href="/blog/2017/05/21/nzes-sankey">4. Sankey chart of ‘transitions’ from 2011 vote to 2014</a></h3>

<p>This was an interesting experiment in looking at what one survey can tell us about people swapping from party to party:</p>

<iframe width="700" height="500" src="/img/0098-sankey.html" frameborder="0" scrolling="no"></iframe>

<h3 id="modelling-voter-turnouthttpellispgithubioblog20170713voter-turnout"><a href="http://ellisp.github.io/blog/2017/07/13/voter-turnout">5. Modelling voter turnout</a></h3>

<p>I adapted my approach of modelling party vote to the perhaps even more important question of who turns out to vote at all.</p>

<p><img src="/img/0104-model-results.svg" width="100%" /></p>

<h3 id="cross-tab-toolblog20170820nzes-so-far"><a href="/blog/2017/08/20/nzes-so-far">6. Cross tab tool</a></h3>

<p>The sixth blog post is today’s.</p>

<p><a href="https://ellisp.shinyapps.io/nzes2014_x_by_party/"><img src="/img/0108-screenshot-crosstabs-nzes.png" width="100%" /></a></p>

<p>For New Zealand readers, have a good final five weeks up to the 2017 election!</p>


</div>

<div class = "container">
   <div class="col-md-4">
    
        <a rel="prev" href="/blog/2017/08/19/quantiles-gini">
        <p>&larr; Older</p>
        <p>Estimating Gini coefficient when we only have mean income by decile</p>
        
        </a>
    
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4" style="text-align: right;">
     
        <a rel="next" href="/blog/2017/09/09/rmarkdown">
        <p>Newer &rarr;</p>
        <p>R Markdown for documents with logos, watermarks, and corporate styles</p>
        
        </a>
    
      </div>
      </div>
      
      
      
</div>


   
    <div id="disqus_thread"></div>

    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'statsinthewild';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'statsinthewild';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
    
   
			
			</div><!-- /.container -->

         

   <div class = "container footer">
			<footer>
	    		<gcse:search></gcse:search>
        	<p>Follow <a href = "/feed.xml">this blog with RSS</a>.  Or follow <a href = "/feed.r.xml">posts in this blog featuring R with RSS</a>.</p>
			
            <p>This blog is built with <a href = "http://jekyllrb.com/">Jekyll</a>, <a href = "http://getbootstrap.com/">Bootstrap</a>, <a href = "https://www.ruby-lang.org/en/">Ruby</a> and <a href = "https://cran.r-project.org/">R</a>.  Read my <a href="/about/acknowledgements.html">acknowledgements</a> for a little more on how.  I'm pleased to be aggregated at <a href="http://www.r-bloggers.com/">R-bloggers</a>, the one-stop shop for blog posts featuring R.</p>

			<div class="fb-like" data-href="https://www.facebook.com/peterstats/" data-layout="standard" data-action="like" data-show-faces="true" data-share="false"></div>
			
			<p>			
            <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Peter's stats stuff</span> by <a href = "/about/index.html">Peter Ellis</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
			</p>

			

			</footer>
    </div>



  
</body>
</html>
   




         
