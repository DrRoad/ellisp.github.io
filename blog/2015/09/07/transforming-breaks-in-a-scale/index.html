      <!DOCTYPE html>
	<html lang="en">
		<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
			<title>Transforming the breaks to match a scale</title>
      	
         
         
            <meta name ="description" content ="I follow up my ggplot2 version of John and Draper's modulus transformation from my last post. The default for creating new transformations using the {scales} package places the breaks for gridlines and labels in the scale at regular intervals on the original untransformed scale; I explore how to adjust for this.">
            <meta property="og:description" content ="I follow up my ggplot2 version of John and Draper's modulus transformation from my last post. The default for creating new transformations using the {scales} package places the breaks for gridlines and labels in the scale at regular intervals on the original untransformed scale; I explore how to adjust for this.">
         
         <meta property="og:site_name" content="Peter's stats stuff" />
         <meta property="og:title" content="Transforming the breaks to match a scale" />
         
            <meta property="og:image" content="http://ellisp.github.io/img/0007_density_plots_breaks.png" />
         
         <meta property="og:url" content="http://ellisp.github.io/blog/2015/09/07/transforming-breaks-in-a-scale/" />
         <meta property="og:author" content= "https://www.facebook.com/peter.ellis.353" />
         <meta property="og:type" content="article" />
           
          <link href="/css/bootstrap.min.css" rel ="stylesheet">
          <link href="/css/bootstrap-theme.min.css" rel ="stylesheet">
            <link href="/css/custom.css" rel ="stylesheet">       
     <link rel="stylesheet" href="/css/Pygments/autumn.css">      
     <link rel="stylesheet" href="/css/Pygments/custom.css">      
            
            
   <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

     ga('create', 'UA-65886313-1', 'auto');
     ga('send', 'pageview');

   </script>

   <style>
    ul li { margin-bottom: 9px; }
    ol li { margin-bottom: 9px; }
   </style>
   
   <link rel="alternate" type="application/rss+xml" title="Peter's stats stuff by Peter Ellis"
      href="/feed.xml">


      
		</head>
      
  <body role = "document">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
         <script src="/js/bootstrap.min.js"></script>
         
  
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Peter's stats stuff</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">All blog posts <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="/blog">Ordered by date</a></li>
                  <li><a href="/blog/index_by_tag.html">Grouped by subject matter</a></li>
                  <li><a href = /blog/2015/10/30/MTAGDP>Most recent post</a></li>
                 </ul>
            </li>
              <li><a href="/blog/showcase.html">Showcase</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  
  
      
			<div class="container">
			
			    <div class="jumbotron">
      <div class="container">
        <h1>Transforming the breaks to match a scale</h1>
         <p class="meta">07 Sep 2015</p>
        
      </div>
    </div>




<div class = "post-summary">
<h2>TL;DR Summary:</h2>
   I follow up my ggplot2 version of John and Draper's modulus transformation from my last post. The default for creating new transformations using the {scales} package places the breaks for gridlines and labels in the scale at regular intervals on the original untransformed scale; I explore how to adjust for this.
   <hr></hr>
</div>

<div class="post">
<div class="col-md-2">

</div>
  <div class="col-md-8">

  <h2 id="something-missing">Something missing</h2>
<p>In <a href="http://ellisp.github.io/blog/2015/09/05/creating-a-scale-transformation/">my last post</a> I developed a new scale transformation for R using the approach and platform from the {ggplot2} and {scales}. I implemented a method proposed in 1980 by John and Draper that does some of the job of a logarithmic transform in reducing the dominance on the page of the large values, but is also continuous through zero and works for negative numbers.  Here’s the image where I demonstrated that:</p>

<p><img src="/img/0006_income_by_region.png" alt="regions-plot" /></p>

<p>Tweets about the post highlighted a problem with axis labels - no labels at the points where the bulk of the data lie.  This can be fixed by setting the breaks by hand but there should be a way to automate that.  This post records my efforts in this direction. In the image above, you can see the big gap between $0 and $10,000 on the vertical axis (this is showing income per week, so most people are between those two numbers!) and 0 and 50 hours worked per week on the horizontal axis.</p>

<h2 id="simulated-example-application">Simulated example application</h2>
<p>To help me address this I simulated some toy data from a realistic situation - a positive, largish log-normal distribution mixed up with an unrelated normal distribution.  Real data often resemble this sort of mixture (and much more complicated of course) of several different probability distributions, and it can make some of the more traditional statistical inference techniques really suffer.</p>

<p>Here’s the density plot of my simulated data, presented in its original scale, with a logarithm scale, and with the new modulus transform scale.  There’s usually no strict rights or wrongs in this sort of exploratory analysis, but the logarithm transform does throw away all the negative values and gives a wholy erroneous focus on the big, log-normally distributed part of the data.</p>

<p><img src="/img/0007_density_plots.svg" alt="density-plot" /></p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<a name="True-2"></a><span class="kn">library</span><span class="p">(</span>scales<span class="p">)</span> 
<a name="True-3"></a><span class="kn">library</span><span class="p">(</span>tidyr<span class="p">)</span>
<a name="True-4"></a><span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<a name="True-5"></a><span class="kn">library</span><span class="p">(</span>showtext<span class="p">)</span>
<a name="True-6"></a>font.add.google<span class="p">(</span><span class="s">&quot;Poppins&quot;</span><span class="p">,</span> <span class="s">&quot;myfont&quot;</span><span class="p">)</span>
<a name="True-7"></a>showtext.auto<span class="p">()</span>
<a name="True-8"></a>
<a name="True-9"></a>eg <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="kp">exp</span><span class="p">(</span>rnorm<span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">1</span><span class="p">)),</span> rnorm<span class="p">(</span><span class="m">50</span><span class="p">,</span> <span class="m">-50</span><span class="p">,</span> <span class="m">60</span><span class="p">)))</span>
<a name="True-10"></a>
<a name="True-11"></a>
<a name="True-12"></a>p <span class="o">&lt;-</span> ggplot<span class="p">(</span>eg<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> x<span class="p">))</span> <span class="o">+</span>
<a name="True-13"></a>   geom_density<span class="p">()</span> <span class="o">+</span>
<a name="True-14"></a>   geom_rug<span class="p">()</span> <span class="o">+</span>
<a name="True-15"></a>   theme_minimal<span class="p">(</span>base_family <span class="o">=</span> <span class="s">&quot;myfont&quot;</span><span class="p">)</span>
<a name="True-16"></a>
<a name="True-17"></a>p <span class="o">+</span> labs<span class="p">(</span>x <span class="o">=</span> <span class="s">&quot;Original scale&quot;</span><span class="p">)</span>
<a name="True-18"></a>p <span class="o">+</span> scale_x_continuous<span class="p">(</span><span class="s">&quot;Logarithm scale&quot;</span><span class="p">,</span> trans <span class="o">=</span> <span class="s">&quot;log&quot;</span><span class="p">,</span> label <span class="o">=</span> comma<span class="p">)</span> 
<a name="True-19"></a><span class="c1"># see previous post for definition of modulus_trans():</span>
<a name="True-20"></a>p <span class="o">+</span> scale_x_continuous<span class="p">(</span><span class="s">&quot;Modulus transform scale&quot;</span><span class="p">,</span> trans <span class="o">=</span> modulus_trans<span class="p">(</span><span class="m">0.5</span><span class="p">),</span> label <span class="o">=</span> comma<span class="p">)</span></code></pre></div>

<p>Like in my example from last week, we can see that there are no axis labels where the bulk of the data is - between 0 and 2,000.  That’s what we want to fix.</p>

<h2 id="helper-functions">Helper functions</h2>
<p>For inspiration, I drew on the answers to this <a href="http://stackoverflow.com/questions/14255533/pretty-ticks-for-log-normal-scale-using-ggplot2-dynamic-not-manual">Stack Overflow question</a>, particularly Heather Turner’s (it’s the lowest rated answer but the best in my opinion - it just came in a year after the attention had moved on).  Turner was doing a similar task to me, but with the simpler log transform.  I quickly realised that I needed to define some standalone functions that do the transformation and its inverse.  That’s pretty straightforward</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a><span class="m">.</span>mod_transform <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>y<span class="p">,</span> lambda<span class="p">){</span>
<a name="True-2"></a>   <span class="kr">if</span><span class="p">(</span>lambda <span class="o">!=</span> <span class="m">0</span><span class="p">){</span>
<a name="True-3"></a>      yt <span class="o">&lt;-</span> <span class="kp">sign</span><span class="p">(</span>y<span class="p">)</span> <span class="o">*</span> <span class="p">(((</span><span class="kp">abs</span><span class="p">(</span>y<span class="p">)</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span> <span class="o">^</span> lambda <span class="o">-</span> <span class="m">1</span><span class="p">)</span> <span class="o">/</span> lambda<span class="p">)</span>
<a name="True-4"></a>   <span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
<a name="True-5"></a>      yt <span class="o">=</span> <span class="kp">sign</span><span class="p">(</span>y<span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="kp">log</span><span class="p">(</span><span class="kp">abs</span><span class="p">(</span>y<span class="p">)</span> <span class="o">+</span> <span class="m">1</span><span class="p">))</span>
<a name="True-6"></a>   <span class="p">}</span>
<a name="True-7"></a>   <span class="kr">return</span><span class="p">(</span>yt<span class="p">)</span>
<a name="True-8"></a><span class="p">}</span>
<a name="True-9"></a>
<a name="True-10"></a>
<a name="True-11"></a><span class="m">.</span>mod_inverse <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>yt<span class="p">,</span> lambda<span class="p">){</span>
<a name="True-12"></a>   <span class="kr">if</span><span class="p">(</span>lambda <span class="o">!=</span> <span class="m">0</span><span class="p">){</span>
<a name="True-13"></a>      y <span class="o">&lt;-</span> <span class="p">((</span><span class="kp">abs</span><span class="p">(</span>yt<span class="p">)</span> <span class="o">*</span> lambda <span class="o">+</span> <span class="m">1</span><span class="p">)</span>  <span class="o">^</span> <span class="p">(</span><span class="m">1</span> <span class="o">/</span> lambda<span class="p">)</span> <span class="o">-</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> <span class="kp">sign</span><span class="p">(</span>yt<span class="p">)</span>
<a name="True-14"></a>   <span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
<a name="True-15"></a>      y <span class="o">&lt;-</span> <span class="p">(</span><span class="kp">exp</span><span class="p">(</span><span class="kp">abs</span><span class="p">(</span>yt<span class="p">))</span> <span class="o">-</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> <span class="kp">sign</span><span class="p">(</span>yt<span class="p">)</span>
<a name="True-16"></a>      
<a name="True-17"></a>   <span class="p">}</span>
<a name="True-18"></a>   <span class="kr">return</span><span class="p">(</span>y<span class="p">)</span>
<a name="True-19"></a><span class="p">}</span></code></pre></div>

<h2 id="approach">Approach</h2>
<p>My strategy is going to be to</p>

<ul>
  <li>transform the data with .mod_transform()</li>
  <li>use the pretty() function from base R to determine nearly-equally spaced breaks along that transformed range</li>
  <li>transform those breaks back to the original scale with .mod_inverse()</li>
  <li>tidy up the numbers by rounding them, rounding more aggressively the larger the number</li>
</ul>

<p>The whole thing gets wrapped up in a function that can be used by the breaks = argument from a scale like scale_x_continuous.  Let’s see where we’re heading:</p>

<p><img src="/img/0007_density_plots_breaks.svg" alt="density-plots-with-breaks" /></p>

<p>One tricky catch was the final tidying up / rounding.  At one point I made the mistake of trying to copy what pretty() does and pick the nearest number that is 1, 2 or 5 times a multiple of 10.  This made the gridlines look oddly spaced; it makes sense for a logarithm transform but not for our more complex one.</p>

<p>So here’s how I did it.  I broke it into two more functions, because I thought prettify() (which does the rounding) might be useful for something else (I’m sure there’s something that does this already in R, maybe even in base R, but it’s easier to write than to find).</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>prettify <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>breaks<span class="p">){</span>
<a name="True-2"></a>   <span class="c1"># round numbers, more aggressively the larger they are</span>
<a name="True-3"></a>   digits <span class="o">&lt;-</span> <span class="o">-</span><span class="kp">floor</span><span class="p">(</span><span class="kp">log10</span><span class="p">(</span><span class="kp">abs</span><span class="p">(</span>breaks<span class="p">)))</span> <span class="o">+</span> <span class="m">1</span>
<a name="True-4"></a>   digits<span class="p">[</span>breaks <span class="o">==</span> <span class="m">0</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">0</span>
<a name="True-5"></a>   <span class="kr">return</span><span class="p">(</span><span class="kp">round</span><span class="p">(</span>breaks<span class="p">,</span> digits <span class="o">=</span> digits<span class="p">))</span>
<a name="True-6"></a><span class="p">}</span>
<a name="True-7"></a>
<a name="True-8"></a>mod_breaks <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>lambda<span class="p">,</span> n <span class="o">=</span> <span class="m">8</span><span class="p">,</span> prettify <span class="o">=</span> <span class="kc">TRUE</span><span class="p">){</span>
<a name="True-9"></a>   <span class="kr">function</span><span class="p">(</span>x<span class="p">){</span>
<a name="True-10"></a>      breaks <span class="o">&lt;-</span> <span class="m">.</span>mod_transform<span class="p">(</span>x<span class="p">,</span> lambda<span class="p">)</span> <span class="o">%&gt;%</span>
<a name="True-11"></a>         <span class="kp">pretty</span><span class="p">(</span>n <span class="o">=</span> n<span class="p">)</span> <span class="o">%&gt;%</span>
<a name="True-12"></a>         <span class="m">.</span>mod_inverse<span class="p">(</span>lambda<span class="p">)</span>
<a name="True-13"></a>      <span class="kr">if</span><span class="p">(</span>prettify<span class="p">){</span>
<a name="True-14"></a>         breaks <span class="o">&lt;-</span> prettify<span class="p">(</span>breaks<span class="p">)</span>
<a name="True-15"></a>      <span class="p">}</span>
<a name="True-16"></a>      <span class="kr">return</span><span class="p">(</span>breaks<span class="p">)</span>
<a name="True-17"></a>   <span class="p">}</span>
<a name="True-18"></a><span class="p">}</span></code></pre></div>

<p>Usage is simple.  Here’s how I drew the two density plots above:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>p <span class="o">+</span>
<a name="True-2"></a>   scale_x_continuous<span class="p">(</span>trans <span class="o">=</span> modulus_trans<span class="p">(</span><span class="m">0.2</span><span class="p">),</span> label <span class="o">=</span> comma<span class="p">,</span> 
<a name="True-3"></a>                      breaks <span class="o">=</span> mod_breaks<span class="p">(</span>lambda <span class="o">=</span> <span class="m">0.2</span><span class="p">,</span> prettify <span class="o">=</span> <span class="kc">FALSE</span><span class="p">))</span> <span class="o">+</span>
<a name="True-4"></a>   theme<span class="p">(</span>panel.grid.minor <span class="o">=</span> element_blank<span class="p">())</span> <span class="o">+</span>
<a name="True-5"></a>   ggtitle<span class="p">(</span><span class="s">&quot;Regular breaks&quot;</span><span class="p">)</span>
<a name="True-6"></a>
<a name="True-7"></a>
<a name="True-8"></a>p <span class="o">+</span> 
<a name="True-9"></a>   scale_x_continuous<span class="p">(</span>trans <span class="o">=</span> modulus_trans<span class="p">(</span><span class="m">0.2</span><span class="p">),</span> label <span class="o">=</span> comma<span class="p">,</span> 
<a name="True-10"></a>                      breaks <span class="o">=</span> mod_breaks<span class="p">(</span>lambda <span class="o">=</span> <span class="m">0.2</span><span class="p">,</span> prettify <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="o">+</span>
<a name="True-11"></a>   theme<span class="p">(</span>panel.grid.minor <span class="o">=</span> element_blank<span class="p">())</span> <span class="o">+</span>
<a name="True-12"></a>   ggtitle<span class="p">(</span><span class="s">&quot;Rounded breaks&quot;</span><span class="p">)</span></code></pre></div>

<h2 id="applying-to-the-new-zealand-income-survey-2011">Applying to the New Zealand Income Survey 2011</h2>
<p>OK, now I can apply it to the real data from my previous post (and a post earlier than that shows how to get it into the database I’m using here).  First, here’s the density of individual weekly income from all sources in that 2011 survey:</p>

<p><img src="/img/0007_better_nzis_breaks.svg" alt="nzis-breaks" /></p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a><span class="c1"># connect to database</span>
<a name="True-2"></a><span class="kn">library</span><span class="p">(</span>RODBC<span class="p">)</span>
<a name="True-3"></a>PlayPen <span class="o">&lt;-</span> odbcConnect<span class="p">(</span><span class="s">&quot;PlayPen_prod&quot;</span><span class="p">)</span>
<a name="True-4"></a>sqlQuery<span class="p">(</span>PlayPen<span class="p">,</span> <span class="s">&quot;use nzis11&quot;</span><span class="p">)</span>
<a name="True-5"></a>
<a name="True-6"></a>inc <span class="o">&lt;-</span> sqlQuery<span class="p">(</span>PlayPen<span class="p">,</span> <span class="s">&quot;select * from vw_mainheader&quot;</span><span class="p">)</span> 
<a name="True-7"></a>
<a name="True-8"></a>ggplot<span class="p">(</span>inc<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> income<span class="p">))</span> <span class="o">+</span>
<a name="True-9"></a>   geom_density<span class="p">()</span> <span class="o">+</span>
<a name="True-10"></a>   geom_rug<span class="p">()</span> <span class="o">+</span>
<a name="True-11"></a>   scale_x_continuous<span class="p">(</span>trans <span class="o">=</span> modulus_trans<span class="p">(</span><span class="m">0.25</span><span class="p">),</span> label <span class="o">=</span> dollar<span class="p">,</span>
<a name="True-12"></a>                      breaks <span class="o">=</span> mod_breaks<span class="p">(</span><span class="m">0.25</span><span class="p">))</span> <span class="o">+</span>
<a name="True-13"></a>   theme_minimal<span class="p">(</span>base_family <span class="o">=</span> <span class="s">&quot;myfont&quot;</span><span class="p">)</span></code></pre></div>

<p>And now here’s something new (but similar to last week) - weekly income compared hours worked, by occupation:
<img src="/img/0007_income_by_occupation.svg" alt="nzis-breaks" /></p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><a name="True-1"></a>ggplot<span class="p">(</span>inc<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> hours<span class="p">,</span> y <span class="o">=</span> income<span class="p">))</span> <span class="o">+</span>
<a name="True-2"></a>   facet_wrap<span class="p">(</span><span class="o">~</span>occupation<span class="p">,</span> ncol <span class="o">=</span><span class="m">2</span><span class="p">)</span> <span class="o">+</span>
<a name="True-3"></a>   geom_point<span class="p">(</span>alpha <span class="o">=</span> <span class="m">0.2</span><span class="p">)</span> <span class="o">+</span>
<a name="True-4"></a>   scale_x_continuous<span class="p">(</span>trans <span class="o">=</span> modulus_trans<span class="p">(</span><span class="m">0.25</span><span class="p">),</span> breaks <span class="o">=</span> mod_breaks<span class="p">(</span><span class="m">0.25</span><span class="p">))</span> <span class="o">+</span>
<a name="True-5"></a>   scale_y_continuous<span class="p">(</span>trans <span class="o">=</span> modulus_trans<span class="p">(</span><span class="m">0.25</span><span class="p">),</span> label <span class="o">=</span> dollar<span class="p">,</span> breaks <span class="o">=</span> mod_breaks<span class="p">(</span><span class="m">0.25</span><span class="p">))</span> <span class="o">+</span>
<a name="True-6"></a>   theme_light<span class="p">(</span>base_family <span class="o">=</span> <span class="s">&quot;myfont&quot;</span><span class="p">)</span></code></pre></div>

<p>Much better, particularly if I’m going to use this transformation a lot, and it looks like the right one to use for data that is mostly positive and right tailed, but has a bunch of negatives thrown in too.</p>



</div>

<div class = "container">
   <div class="col-md-4">
    
        <a rel="prev" href="/blog/2015/09/05/creating-a-scale-transformation">
        <p>&larr; Older</p>
        <p>Creating a scale transformation</p>
        
        </a>
    
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4" style="text-align: right;">
     
        <a rel="next" href="/blog/2015/09/12/inequality-stats-distributions">
        <p>Newer &rarr;</p>
        <p>Sampling distribution of Gini coefficient</p>
        
        </a>
    
      </div>
      </div>
      
      
      
</div>


   
    <div id="disqus_thread"></div>

    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'statsinthewild';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'statsinthewild';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
    
   
			
			</div><!-- /.container -->

         

   <div class = "container footer">
			<footer>
	    		
            <p>Follow <a href = "/feed.xml">this blog with RSS</a>.  Or follow <a href = "/feed.r.xml">posts in this blog featuring R with RSS</a>.</p>
	
            <p>This blog is built with <a href = "http://jekyllrb.com/">Jekyll</a>, <a href = "http://getbootstrap.com/">Bootstrap</a>, <a href = "https://www.ruby-lang.org/en/">Ruby</a> and <a href = "https://cran.r-project.org/">R</a>.  Read my <a href="/about/acknowledgements.html">acknowledgements</a> for a little more on how.  I'm pleased to be aggregated at <a href="http://www.r-bloggers.com/">R-bloggers</a>, the one-stop shop for blog posts featuring R.</p>

            <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Peter's stats stuff</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="/" property="cc:attributionName" rel="cc:attributionURL">Peter Ellis</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.


			</footer>
    </div>



  
</body>
</html>
   




         
